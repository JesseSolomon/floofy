'use strict';function floofy(d,l=document){let h={};const p=a=>{let b=null;a=a.replace(/^[\w-_]+/,c=>{b=document.createElement(c);return""});b||(b=document.createElement("div"));a=a.replace(/\[[\w\-_]*(\s*=\s*)?([\w\-_]+|"((?!").)*"|'((?!').*)')\]/g,c=>{let [g,k]=c.replace(/(^\[|\]$)/g,"").split("=").map(f=>f.trim());k&&(k=k.replace(/(^"|"$)/g,"").replace(/(^'|'$)/g,""));b.setAttribute(g,k||"");return""});a=a.replace(/(?<=#)[\w-_]+/g,c=>{b.id=c;return""});a=a.replace(/(?<=.)[\w-_]+/g,c=>{b.classList.add(c);
return""});return b},e=(a,b)=>{let c=l;for(let g=0;g<a.length;g++){let k=a[g],f=c.querySelector(k);if(b&&g===a.length-1||!f)f=p(k),floofy.match_element(f),c.append(f);c=f}return c};Object.defineProperty(h,"actual",{get:()=>{let a=e(d.split(/[\s>]/g).filter(b=>0<b.length),!1);a[floofy.parent_selector]=d;return a}});Object.defineProperty(h,"new",{get:()=>{let a=e(d.split(/[\s>]/g).filter(b=>0<b.length),!0);a[floofy.parent_selector]=d;return a}});Object.defineProperty(h,"for",{get:()=>()=>{},set:a=>
{let b=d;for(let c=l;c instanceof HTMLElement;c=c.parentElement)floofy.parent_selector in c&&(b=c[floofy.parent_selector]+" "+b);if(b in floofy.element_register)throw`Floofy: illegal attempt to overwrite for handler on "${b}"`;floofy.element_register[b]={signature:Symbol("floofy-element"),constructor:a};if("function"===typeof a)l.querySelectorAll(d).forEach(c=>{c instanceof HTMLElement&&(c[floofy.parent_selector]=d,a(c))});else throw new TypeError(`constructor must be of type function, received ${typeof a}`);
}});Object.defineProperty(h,"all",{get:()=>Array.from(l.querySelectorAll(d)).filter(a=>a instanceof HTMLElement).map(a=>{a[floofy.parent_selector]=d;return a})});Object.defineProperty(h,"first",{get:()=>{let a=l.querySelector(d);a[floofy.parent_selector]=d;return a}});return h}
(function(d){d.parent_selector=Symbol("selector");d.element_register={};d.match_element=e=>{for(let a in d.element_register)d.element_register[a].signature in e||!e.matches(a)||(e[d.parent_selector]=a,d.element_register[a].constructor(e),e[d.element_register[a].signature]="ready")};(new MutationObserver(e=>{for(let a of e)a.addedNodes.forEach(b=>{b instanceof HTMLElement&&d.match_element(b)})})).observe(document,{childList:!0,subtree:!0});Object.defineProperty(String.prototype,"f",{get(){return d(this)}});
Object.defineProperty(HTMLElement.prototype,"f",{get:function(){return new Proxy(this,{get:(e,a)=>{if("string"===typeof a)return d(a,e);throw new TypeError("selector must be of type string");}})}});let l={},h=[];const p=e=>{e=e.split("/").filter(a=>0<a.length);a:for(let a in l){let b=a.endsWith("!"),c=a.replace(/!$/,"").split("/").filter(m=>0<m.length),g=0,k=0,f=0,n=!1,r={};for(;g<c.length;){let m=e[f],q=c[g];switch(q){case m:n=!1;break;case "*":break;case "**":n=!0;break;default:if(q.startsWith("$"))r[q]=
g<e.length&&f<e.length?decodeURIComponent(m):"",n=!1;else if(!n)continue a}if(n){if(f===e.length-1)break}else g++;k++;f=Math.min(f+1,e.length-1)}if(!(b&&!n&&k<=e.length-1))return m=>{m=l[a]({...r,...history.state,...m});"function"===typeof m&&h.push(m)}}return()=>{}};Object.defineProperty(Location.prototype,"f",{get:function(){return new Proxy(this,{get:(e,a)=>{if("string"===typeof a)return b=>{history.pushState(b,document.title,a);p(a)(b||{})}},set:(e,a,b)=>{if("string"===typeof a&&"function"===
typeof b)return l[a]=b,!0}})}});document.addEventListener("DOMContentLoaded",()=>{p(location.pathname)({});addEventListener("popstate",()=>{0<h.length&&h.pop()({});p(location.pathname)({})})})})(floofy||(floofy={}));
