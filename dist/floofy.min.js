'use strict';function floofy(e,m=document){let l={},h=(floofy.selector_path in m?m[floofy.selector_path]+" ":"")+e;const q=a=>{let b=null;a=a.replace(/^[\w-_]+/,f=>{b=document.createElement(f);return""});b||(b=document.createElement("div"));a=a.replace(/\[[\w\-_]*(\s*=\s*)?([\w\-_]+|"((?!").)*"|'((?!').*)')\]/g,f=>{let [n,k]=f.replace(/(^\[|\]$)/g,"").split("=").map(g=>g.trim());k&&(k=k.replace(/(^"|"$)/g,"").replace(/(^'|'$)/g,""));b.setAttribute(n,k||"");return""});a=a.replace(/(?<=#)[\w-_]+/g,
f=>{b.id=f;return""});a=a.replace(/(?<=.)[\w-_]+/g,f=>{b.classList.add(f);return""});return b},d=(a,b)=>{let f=m;for(let n=0;n<a.length;n++){let k=a[n],g=f.querySelector(k);if(b&&n===a.length-1||!g)g=q(k),floofy.match_element(g),f.append(g);f=g}return f},c=a=>floofy.element_proxy(a,h);Object.defineProperty(l,"actual",{get:()=>floofy.element_proxy(d(e.split(/[\s>]/g).filter(a=>0<a.length),!1),h)});Object.defineProperty(l,"new",{get:()=>floofy.element_proxy(d(e.split(/[\s>]/g).filter(a=>0<a.length),
!0),h)});Object.defineProperty(l,"for",{get:()=>()=>{},set:a=>{if(h in floofy.element_register)throw`Floofy: illegal attempt to overwrite for handler on "${h}"`;floofy.element_register[h]={signature:Symbol("floofy-element"),selector_path:h,constructor:a};if("function"===typeof a)m.querySelectorAll(e).forEach(b=>{b instanceof HTMLElement&&a(floofy.element_proxy(b,h))});else throw new TypeError(`constructor must be of type function, received ${typeof a}`);}});Object.defineProperty(l,"all",{get:()=>
Array.from(m.querySelectorAll(e)).filter(a=>a instanceof HTMLElement).map(c)});Object.defineProperty(l,"first",{get:()=>floofy.element_proxy(m.querySelector(e),h)});return l}
(function(e){e.selector_path=Symbol("selector");e.element_register={};e.element_proxy=(d,c)=>new Proxy(d,{getPrototypeOf(a){return Object.getPrototypeOf(a)},has(a,b){return b===e.selector_path||"f"===b?!0:b in a},get(a,b){if(b===e.selector_path)return c;if("f"===b)return m(e.element_proxy(a,c));b=a[b];"function"===typeof b&&(b=Function.prototype.bind.call(b,a));return b},set(a,b,f){return a[b]=f},apply(a,b){return Object.apply(a,b)}});e.match_element=d=>{for(let c in e.element_register)e.element_register[c].signature in
d||!d.matches(c)||(e.element_register[c].constructor(e.element_proxy(d,e.element_register[c].selector_path)),d[e.element_register[c].signature]="ready")};const m=d=>new Proxy(d,{get:(c,a)=>{if("string"===typeof a)return e(a,c);throw new TypeError("selector must be of type string");}});(new MutationObserver(d=>{for(let c of d)c.addedNodes.forEach(a=>{a instanceof HTMLElement&&e.match_element(a)})})).observe(document,{childList:!0,subtree:!0});Object.defineProperty(String.prototype,"f",{get(){return e(this)}});
Object.defineProperty(HTMLElement.prototype,"f",{get(){return m(this)}});let l={},h=[];const q=d=>{d=d.split("/").filter(c=>0<c.length);a:for(let c in l){let a=c.endsWith("!"),b=c.replace(/!$/,"").split("/").filter(p=>0<p.length),f=0,n=0,k=0,g=!1,t={};for(;f<b.length;){let p=d[k],r=b[f];switch(r){case p:g=!1;break;case "*":break;case "**":g=!0;break;default:if(r.startsWith("$"))t[r]=f<d.length&&k<d.length?decodeURIComponent(p):"",g=!1;else if(!g)continue a}if(g){if(k===d.length-1)break}else f++;n++;
k=Math.min(k+1,d.length-1)}if(!(a&&!g&&n<=d.length-1))return p=>{p=l[c]({...t,...history.state,...p});"function"===typeof p&&h.push(p)}}return()=>{}};Object.defineProperty(Location.prototype,"f",{get:function(){return new Proxy(this,{get:(d,c)=>{if("string"===typeof c)return a=>{history.pushState(a,document.title,c);q(c)(a||{})}},set:(d,c,a)=>{if("string"===typeof c&&"function"===typeof a)return l[c]=a,!0}})}});document.addEventListener("DOMContentLoaded",()=>{q(location.pathname)({});addEventListener("popstate",
()=>{0<h.length&&h.pop()({});q(location.pathname)({})})})})(floofy||(floofy={}));
